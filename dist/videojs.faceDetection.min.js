/*! videojs-faceDetection - v0.1.0 - 2013-10-10
* https://github.com/benjipott/videojs-faceDetection
* Copyright (c) 2013 Pott Benjamin; Licensed MIT */

vjs.plugin.merge=function(){var a=vjs.obj.merge.apply(this,arguments);if(a.hasOwnProperty("userAgentAllowed")&&a.enabled){a.userAgentAllowed=a.userAgentAllowed.split(",");for(var b=0,c=a.userAgentAllowed;b<c.length;b++){var d=new RegExp(c[b],"i");if(a.enabled=!!vjs.USER_AGENT.match(d),a.enabled)break}}return a},function(){var a={enabled:!0,src:"images/glasses.png"};vjs.plugin("faceDetection",function(b){var c=vjs.plugin.merge(a,b);return c.enabled?(this.faceDetectionComponent=new vjs.FaceDetectionComponent(this,c),void 0):!1})}();var cast=cast||{};vjs.Player.prototype.faceDetectionComponent={},vjs.Player.prototype.video,vjs.FaceDetectionComponent=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.bitmapDrawable=new Image,this.ctx=this.el_.getContext("2d"),this.bitmapDrawable.src=this.options_.src,a.on("play",vjs.bind(this,this.startIntervall)),a.on("ended",vjs.bind(this,this.stopIntervall))}}),vjs.FaceDetectionComponent.prototype.vidInterval=0,vjs.FaceDetectionComponent.prototype.bitmapDrawable,vjs.FaceDetectionComponent.prototype.startIntervall=function(){this.vidInterval=setInterval(vjs.bind(this,this.html5glasses),250)},vjs.FaceDetectionComponent.prototype.stopIntervall=function(){clearInterval(this.vidInterval)},vjs.FaceDetectionComponent.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"canvas",{width:this.player_.width(),height:this.player_.height(),className:"vjs-faceDetection"});return this.player_.el_.appendChild(a),a},vjs.FaceDetectionComponent.prototype.html5glasses=function(){var a=((new Date).getTime(),this.player_.width()),b=this.player_.height();this.ctx.drawImage(this.player_.tech.el_,0,0,a,b,0,0,this.el_.width,this.el_.height)};